import{d as I,q as T,D as M,r as h,o as g,f as j,w as d,V as z,a as s,C as q,B as P,c as b,x as r,k as S,e,z as m,t as o,p as R,b as U}from"./index-94373d68.js";import{s as v}from"./status-03815a42.js";import{_ as $}from"./_plugin-vue_export-helper-c27b6911.js";const E=I({__name:"index",props:{type:{default:""}},setup(a){const l=a,t=["primary","success","info","warning","danger"];let y=T("light");const n=M(()=>t.indexOf(l.type)>=0?l.type:""),f=M(()=>t.indexOf(l.type)>=0?"":l.type);return(_,L)=>{const c=h("el-tag");return g(),j(c,{type:s(n),color:s(f),effect:s(y)},{default:d(()=>[z(_.$slots,"default")]),_:3},8,["type","color","effect"])}}}),V="/system";var x=(a=>(a[a.getSysLogList=V+"/admin/sysLog/getSysLogPage"]="getSysLogList",a[a.getSysLog=V+"/admin/sysLog/getSysLog/"]="getSysLog",a))(x||{});function je(a){return q.post(x.getSysLogList,a)}function F(a){return q.post(x.getSysLog+a)}const i=a=>(R("data-v-3986635d"),a=a(),U(),a),G={key:0},H={class:"details-item"},J=i(()=>e("div",{class:"label"},"日志链路ID",-1)),K={class:"content"},Q={class:"details-item"},W=i(()=>e("div",{class:"label"},"模块名称",-1)),X={class:"content"},Y={class:"details-item"},Z=i(()=>e("div",{class:"label"},"用户信息",-1)),A={class:"content"},ee={class:"details-item"},se=i(()=>e("div",{class:"label"},"请求路径",-1)),te={class:"content"},oe={class:"details-item"},ae=i(()=>e("div",{class:"label"},"请求参数",-1)),ie={class:"content"},ce={class:"details-item"},le=i(()=>e("div",{class:"label"},"日志名称",-1)),ne={class:"content"},de={class:"details-item"},_e=i(()=>e("div",{class:"label"},"日志类型",-1)),re={class:"content"},pe={class:"details-item"},ue=i(()=>e("div",{class:"label"},"响应信息",-1)),me={class:"content"},ve={class:"details-item"},he=i(()=>e("div",{class:"label"},"用户环境",-1)),ge={class:"content"},ye={class:"details-item"},fe=i(()=>e("div",{class:"label"},"请求时间",-1)),be={class:"content"},Se={class:"details-item"},xe=i(()=>e("div",{class:"label"},"请求耗时",-1)),Le={class:"content"},De={key:0,class:"details-item"},Ne=i(()=>e("div",{class:"label"},"异常类",-1)),ke={class:"content"},Ce={key:1,class:"details-item"},Me=i(()=>e("div",{class:"label"},"异常信息",-1)),Ve={class:"content"},Ie={class:"dialog-footer"},Te=I({__name:"details",setup(a,{expose:l}){let t=T({});const y=c=>{F(c).then(p=>{t.value=Object.assign({},t.value,p)})},n=P({isShow:!1,title:"操作日志详情",id:null}),f=async c=>{n.isShow=!0,c!=null&&c.id&&y(c.id)},_=()=>{n.isShow=!1,n.id=null,t.value={}},L=async()=>{_()};return l({openDialog:f}),(c,p)=>{const w=E,B=h("el-input"),D=h("el-button"),O=h("el-dialog");return s(n).isShow?(g(),b("div",G,[r(O,{"model-value":!0,"destroy-on-close":"",title:"日志详情",onClose:_},{footer:d(()=>[e("div",Ie,[r(D,{type:"primary",onClick:L},{default:d(()=>[m("确定")]),_:1}),r(D,{onClick:_},{default:d(()=>[m("取消")]),_:1})])]),default:d(()=>{var N,k,C;return[e("div",null,[e("div",H,[J,e("div",K,o(s(t).traceId),1)]),e("div",Q,[W,e("div",X,o(s(t).moduleName),1)]),e("div",Y,[Z,e("div",A,o(s(t).username)+" "+o(s(t).requestIp)+" "+o(s(t).ipAreaDesc),1)]),e("div",ee,[se,e("div",te,o(s(t).requestMethod)+" "+o(s(t).requestUrl),1)]),e("div",oe,[ae,e("div",ie,o(s(t).requestParam),1)]),e("div",ce,[le,e("div",ne,o(s(t).logName),1)]),e("div",de,[_e,e("div",re,o((N=s(v).logType[s(t).logType])==null?void 0:N.label),1)]),e("div",pe,[ue,e("div",me,[r(w,{type:(k=s(v).responseSuccess[s(t).responseSuccess])==null?void 0:k.type},{default:d(()=>{var u;return[m(o((u=s(v).responseSuccess[s(t).responseSuccess])==null?void 0:u.label),1)]}),_:1},8,["type"]),m(" "+o(s(t).responseCode)+" "+o(s(t).responseMessage),1)])]),e("div",ve,[he,e("div",ge,o((C=s(v).isMobile[s(t).isMobile])==null?void 0:C.label)+" "+o(s(t).platformName)+" "+o(s(t).browserName),1)]),e("div",ye,[fe,e("div",be,o(s(t).requestTime)+" ~ "+o(s(t).responseTime),1)]),e("div",Se,[xe,e("div",Le,o(s(t).diffTimeDesc),1)]),s(t).exceptionName?(g(),b("div",De,[Ne,e("div",ke,o(s(t).exceptionName),1)])):S("",!0),s(t).exceptionMessage?(g(),b("div",Ce,[Me,e("div",Ve,[r(B,{modelValue:s(t).exceptionMessage,"onUpdate:modelValue":p[0]||(p[0]=u=>s(t).exceptionMessage=u),autosize:{minRows:2,maxRows:15},type:"textarea",disabled:""},null,8,["modelValue"])])])):S("",!0)])]}),_:1})])):S("",!0)}}});const qe=$(Te,[["__scopeId","data-v-3986635d"]]),ze=Object.freeze(Object.defineProperty({__proto__:null,default:qe},Symbol.toStringTag,{value:"Module"}));export{qe as D,E as _,ze as d,je as g};
