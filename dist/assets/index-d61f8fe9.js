import{_ as H}from"./index-f1a11641.js";import{g as J,D as K,_ as O}from"./details-f2a7d0e7.js";import{_ as Q}from"./index.vue_vue_type_script_setup_true_lang-c7e1fdf1.js";import{s as g}from"./status-03815a42.js";import{d as W,q as S,B as k,f as q,w as t,r as s,o as D,x as e,a,c as X,h as Y,F as Z,e as f,t as b,z as C}from"./index-94373d68.js";import"./_plugin-vue_export-helper-c27b6911.js";const ee=f("span",{class:"search-btn__left"},"查询",-1),le=f("span",{class:"search-btn__left"},"重置",-1),ue=W({__name:"index",setup(te){let n=S({});const N=()=>{d.pageIndex=1,_()},w=()=>{n.value={},d.pageIndex=1,_()},d=k({pageIndex:1,pageSize:10,total:0}),P=p=>{d.pageIndex=p,_()},v=k({data:[]}),_=()=>{J({...d,...n.value,orderBy:{...i.value}}).then(p=>{v.data=p.list||[],d.total=p.total})},i=S({}),z=({column:p,prop:o,order:c})=>{c?(o==="diffTimeDesc"?i.value.column="diff_time":o==="createTime"&&(i.value.column="create_time"),i.value.asc=c==="ascending"):i.value={},d.pageIndex=1,_()},T=S(),B=async(p={})=>{await T.value.openDialog(p)};return _(),(p,o)=>{const c=s("el-input"),r=s("el-form-item"),u=s("el-col"),y=s("el-option"),h=s("el-select"),$=Q,L=s("ele-search"),I=s("el-icon"),x=s("el-button"),E=s("ele-refresh"),F=s("el-row"),R=s("el-form"),m=s("el-table-column"),U=s("el-tooltip"),M=O,j=s("el-table"),A=H,G=s("el-card");return D(),q(G,{shadow:"never",class:"card-box"},{default:t(()=>[e(R,{model:a(n),"label-width":"90px"},{default:t(()=>[e(F,{gutter:20},{default:t(()=>[e(u,{sm:24,md:12,lg:8,xl:6},{default:t(()=>[e(r,{label:"模块名称"},{default:t(()=>[e(c,{modelValue:a(n).moduleName,"onUpdate:modelValue":o[0]||(o[0]=l=>a(n).moduleName=l),placeholder:"请输入模块名称",clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),e(u,{sm:24,md:12,lg:8,xl:6},{default:t(()=>[e(r,{label:"请求路径"},{default:t(()=>[e(c,{modelValue:a(n).requestUrl,"onUpdate:modelValue":o[1]||(o[1]=l=>a(n).requestUrl=l),placeholder:"请输入请求路径",clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),e(u,{sm:24,md:12,lg:8,xl:6},{default:t(()=>[e(r,{label:"日志名称"},{default:t(()=>[e(c,{modelValue:a(n).logName,"onUpdate:modelValue":o[2]||(o[2]=l=>a(n).logName=l),placeholder:"请输入日志名称",clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),e(u,{sm:24,md:12,lg:8,xl:6},{default:t(()=>[e(r,{label:"操作人"},{default:t(()=>[e(c,{modelValue:a(n).username,"onUpdate:modelValue":o[3]||(o[3]=l=>a(n).username=l),placeholder:"请输入操作人",clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),e(u,{sm:24,md:12,lg:8,xl:6},{default:t(()=>[e(r,{label:"日志类型"},{default:t(()=>[e(h,{modelValue:a(n).logType,"onUpdate:modelValue":o[4]||(o[4]=l=>a(n).logType=l),placeholder:"请选择日志类型",clearable:""},{default:t(()=>[(D(!0),X(Z,null,Y(a(g).logType,(l,V)=>(D(),q(y,{key:V,label:l.label,value:V},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(u,{sm:24,md:12,lg:8,xl:6},{default:t(()=>[e(r,{label:"响应状态"},{default:t(()=>[e(h,{modelValue:a(n).responseSuccess,"onUpdate:modelValue":o[5]||(o[5]=l=>a(n).responseSuccess=l),placeholder:"请选择响应状态",clearable:""},{default:t(()=>[e(y,{label:"成功",value:!0}),e(y,{label:"失败",value:!1})]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(u,{sm:24,md:12,lg:8,xl:6},{default:t(()=>[e(r,{label:"请求人IP"},{default:t(()=>[e(c,{modelValue:a(n).requestIp,"onUpdate:modelValue":o[6]||(o[6]=l=>a(n).requestIp=l),placeholder:"请输入请求人IP",clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),e(u,{sm:24,md:12,lg:8,xl:6},{default:t(()=>[e(r,{label:"创建时间"},{default:t(()=>[e($,{type:"daterange",startDate:a(n).createStartTime,"onUpdate:startDate":o[7]||(o[7]=l=>a(n).createStartTime=l),endDate:a(n).createEndTime,"onUpdate:endDate":o[8]||(o[8]=l=>a(n).createEndTime=l),clearable:"","start-placeholder":"开始时间","end-placeholder":"结束时间"},null,8,["startDate","endDate"])]),_:1})]),_:1}),e(u,{sm:24,md:12,lg:8,xl:6},{default:t(()=>[e(r,{"label-width":"0"},{default:t(()=>[e(x,{type:"primary",onClick:N},{default:t(()=>[e(I,null,{default:t(()=>[e(L)]),_:1}),ee]),_:1}),e(x,{onClick:w},{default:t(()=>[e(I,null,{default:t(()=>[e(E)]),_:1}),le]),_:1})]),_:1})]),_:1})]),_:1})]),_:1},8,["model"]),e(j,{data:a(v).data,border:"",style:{width:"100%"},"row-key":"id",onSortChange:z},{default:t(()=>[e(m,{prop:"moduleName",label:"模块名称",align:"center"}),e(m,{prop:"logName",label:"日志名称",width:"230"},{default:t(({row:l})=>[e(U,{content:`${l.requestMethod} ${l.requestUrl}`},{default:t(()=>[f("span",null,b(l.logName),1)]),_:2},1032,["content"])]),_:1}),e(m,{prop:"logType",label:"日志类型",align:"center"},{default:t(({row:l})=>[f("span",null,b(a(g).logType[l.logType].label),1)]),_:1}),e(m,{prop:"responseSuccess",label:"响应状态",align:"center"},{default:t(({row:l})=>[e(M,{type:a(g).responseSuccess[l.responseSuccess].type},{default:t(()=>[C(b(a(g).responseSuccess[l.responseSuccess].label),1)]),_:2},1032,["type"])]),_:1}),e(m,{prop:"username",label:"操作人",align:"center"}),e(m,{prop:"requestIp",label:"请求IP",align:"center",width:"150"},{default:t(({row:l})=>[e(U,{content:l.requestMethod},{default:t(()=>[f("span",null,b(l.requestIp),1)]),_:2},1032,["content"])]),_:1}),e(m,{prop:"diffTimeDesc",label:"耗时",align:"center",sortable:"custom"}),e(m,{prop:"createTime",label:"创建时间",align:"center",sortable:"custom",width:"180"}),e(m,{label:"操作",fixed:"right",align:"center"},{default:t(({row:l})=>[e(x,{link:"",type:"primary",onClick:V=>B(l)},{default:t(()=>[C(" 详情 ")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),e(A,{currentPage:a(d).pageIndex,"onUpdate:currentPage":o[9]||(o[9]=l=>a(d).pageIndex=l),pageSize:a(d).pageSize,"onUpdate:pageSize":o[10]||(o[10]=l=>a(d).pageSize=l),total:a(d).total,onChangePage:P},null,8,["currentPage","pageSize","total"]),e(K,{ref_key:"detailsDialogRef",ref:T},null,512)]),_:1})}}});export{ue as default};
