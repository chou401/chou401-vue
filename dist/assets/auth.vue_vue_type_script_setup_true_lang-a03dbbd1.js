import{a as v,s as x}from"./role-40e2dcca.js";import{d as C,q as b,B,c as I,x as s,w as a,a as i,a6 as R,r as n,o as S,e as u,z as r,E as h}from"./index-94373d68.js";const A={class:"menu-tree"},M={class:"dialog-footer"},N=C({__name:"auth",setup(w,{expose:_}){const o=b(),f={label:"name"};let e=B({isShow:!1,id:null,data:[]});const m=()=>{v(e.id).then(t=>{o.value.setCheckedKeys(t)})},p=t=>{R({}).then(d=>{e.data=d||[]}),t!=null&&t.id&&(e.id=t.id,m()),e.isShow=!0},l=()=>{e.isShow=!1,e.id=null},g=()=>{if(e.id){let t={roleId:e.id,menuIds:o.value.getCheckedKeys()};t.menuIds.length>0?x(t).then(()=>{h.success("设置成功"),l()}):h.error("请选择角色权限")}};return _({openAuthDialog:p}),(t,d)=>{const k=n("el-tree"),c=n("el-button"),y=n("el-dialog");return S(),I("div",null,[s(y,{width:"500px","model-value":i(e).isShow,"destroy-on-close":"",title:"分配权限",onClosed:l},{footer:a(()=>[u("div",M,[s(c,{type:"primary",onClick:g},{default:a(()=>[r("确定")]),_:1}),s(c,{onClick:l},{default:a(()=>[r("取消")]),_:1})])]),default:a(()=>[u("div",A,[s(k,{ref_key:"authRef",ref:o,data:i(e).data,"node-key":"id",props:f,"default-expand-all":"","check-strictly":"","show-checkbox":""},null,8,["data"])])]),_:1},8,["model-value"])])}}});export{N as _};
